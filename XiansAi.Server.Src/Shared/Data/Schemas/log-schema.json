{
    "$jsonSchema": {
        "bsonType": "object",
        "required": ["tenant_id", "created_at", "level", "message", "workflow_id", "workflow_run_id"],
        "properties": {
            "tenant_id": {
                "bsonType": "string",
                "description": "Tenant ID associated with the log"
            },
            "created_at": {
                "bsonType": "date",
                "description": "Timestamp of log creation"
            },
            "level": {
                "bsonType": "string",
                "enum": ["Information", "Warning", "Error", "Debug", "Critical"],
                "description": "Log level"
            },
            "message": {
                "bsonType": "string",
                "description": "Rendered log message"
            },
            "workflow_id": {
                "bsonType": "string",
                "description": "Associated workflow ID"
            },
            "workflow_run_id": {
                "bsonType": "string",
                "description": "Associated workflow run ID"
            },
            "properties": {
                "bsonType": "object",
                "description": "Additional metadata related to the log"
            },
            "exception": {
                "bsonType": ["string", "null"],
                "description": "Exception details if available"
            },
            "updated_at": {
                "bsonType": ["date", "null"],
                "description": "Timestamp of last update"
            }
        },
        "indexes": [
            {
                "keys": { "tenant_id": 1, "created_at": -1 }
            },
            {
                "keys": { "workflow_id": 1, "run_id": 1 }
            },
            {
                "keys": { "level": 1 }
            }
        ]
    }
}
